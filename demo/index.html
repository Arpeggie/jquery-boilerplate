<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>jQuery Boilerplate</title>
		<link rel="stylesheet" type="text/css" href="../css/index.css">
		<script src="../node_modules/jquery/dist/jquery.min.js"></script>
		<script src="../src/jquery.wanli.select.js"></script>
	</head>
	<body>
        <ul class="form-list">
          <li>
            <dl>
              <dt>品类：</dt>
              <dd>
                <div url="post_url" class="i-box searchAdd pinlei">
                  <input type="text" placeholder="输入/查找" id="category"><i class="icon-logo-1"></i>
                </div>
              </dd>
            </dl>
          </li>
          <li>
            <dl>
              <dt>品牌：</dt>
              <dd>
                <div url="post_url" class="i-box searchAdd">
                  <input type="text" placeholder="输入/查找" id="brand"><i class="icon-logo-1"></i>
                </div>
              </dd>
            </dl>
            <dl>
              <dt>产品名称：</dt>
              <dd>
                <div class="i-box">
                  <input type="text" placeholder="输入">
                </div>
              </dd>
            </dl>
            <dl>
              <dt>规格型号：</dt>
              <dd>
                <div class="i-box">
                  <input type="text" placeholder="输入">
                </div>
              </dd>
            </dl>
          </li>
          <li class="luntai">
            <dl>
              <dt>花纹：</dt>
              <dd>
                <div url="post_url" class="i-box searchAdd">
                  <input type="text" placeholder="输入/查找"><i class="icon-logo-1"></i>
                </div>
              </dd>
            </dl>
            <dl>
              <dt>花纹深度：</dt>
              <dd>
                <div class="i-box">
                  <input type="text" placeholder="输入">
                </div>
              </dd>
            </dl>
          </li>
          <li class="luntai">
            <dl>
              <dt>速度级别：</dt>
              <dd>
                <div url="post_url" class="i-box searchAdd">
                  <input type="text" placeholder="输入/查找"><i class="icon-logo-1"></i>
                </div>
              </dd>
            </dl>
            <dl>
              <dt>轮胎净重：</dt>
              <dd>
                <div class="i-box">
                  <input type="text" placeholder="输入">
                </div>
              </dd>
            </dl>
          </li>
          <li>
            <dl>
              <dt>单位：</dt>
              <dd>
                <div class="i-box">
                  <input type="text" placeholder="输入">
                </div>
              </dd>
            </dl>
            <dl>
              <dt>库存：</dt>
              <dd>
                <div class="i-box">
                  <input type="text" placeholder="输入">
                </div>
              </dd>
            </dl>
          </li>
          <li>
            <dl>
              <dt>进货价：</dt>
              <dd>
                <div class="i-box">
                  <input type="text" placeholder="输入">
                </div>
              </dd>
            </dl>
            <dl>
              <dt>销售价：</dt>
              <dd>
                <div class="i-box">
                  <input type="text" placeholder="输入">
                </div>
              </dd>
            </dl>
          </li>
          <li>
            <dl class="col-2">
              <dt>适配车型：</dt>
              <dd>
                <div class="i-box">
                  <div id="search-ll">
                    <div class="chose-p"><i class="icon-back"></i></div>
                    <div class="add-take">
                      <div id="add-push" class="add-inner"></div>
                    </div>
                    <div class="chose-n"><i class="icon-back"></i></div>
                  </div><i id="search-dj" class="icon-logo-1"></i>
                </div>
              </dd>
            </dl>
          </li>
        </ul>
        <button id="valueChange">change value</button>
		<script>
			$( function() {
				var raw;
				$.getJSON("https://gist.githubusercontent.com/Arpeggie/a507e21d928bdfe3dba6e83742efa5a8/raw/d40217428fc464c80521cb83f9dcfb1f3d228fc0/brandSample", function(d){
					raw = d;
					category.trigger("update", [raw]);
				});
				var category = $("#category").wanliSelect({
					nodeText: "brandTypeName",
					nodeValue: "brandTypeCode"
				});
				var brand = $("#brand").wanliSelect({
					nodeText: "brandName",
					nodeValue: "brandCode"
				});

				category.on("change", function(){
					var temp = $(raw).filter(function(i,n){
				  		return n.brandTypeCode === '01'
					})
					brand.trigger("update", [temp[0].DBrands]);
				});
				
        $("#valueChange").click(function(){
          category.trigger("valueChange", [{name: "轮胎", value: "01"}]);
        });
			});
		</script>
	</body>
</html>
